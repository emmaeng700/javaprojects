<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="~{fragments/layout :: head('Registration Successful')}"></head>
<body>
<nav th:replace="~{fragments/layout :: nav('register')}"></nav>

<canvas id="confetti-canvas"></canvas>

<div class="container">
    <div th:replace="~{fragments/layout :: alerts}"></div>

    <div class="success-card card">
        <div class="success-icon">&#10003;</div>
        <h1>Registration Successful</h1>
        <p class="success-message">Congratulations! You are old enough to sign up for this site.</p>
        <div class="success-actions">
            <a th:href="@{/}" class="btn btn-success">Register Another</a>
            <a th:href="@{/submissions}" class="btn btn-primary">View All Submissions</a>
            <a th:href="@{/dashboard}" class="btn btn-secondary">Go to Dashboard</a>
        </div>
    </div>
</div>

<!-- Confetti Animation -->
<script>
(function() {
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const colors = ['#e08850', '#5dba7d', '#f0a672', '#7ee8a5', '#e25c5c', '#3b82f6', '#f59e0b', '#8b5cf6'];
    const particles = [];

    for (let i = 0; i < 150; i++) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height,
            size: Math.random() * 8 + 4,
            color: colors[Math.floor(Math.random() * colors.length)],
            speedY: Math.random() * 3 + 2,
            speedX: Math.random() * 2 - 1,
            rotation: Math.random() * 360,
            rotationSpeed: Math.random() * 6 - 3,
            shape: Math.random() > 0.5 ? 'rect' : 'circle',
            opacity: 1
        });
    }

    let frame = 0;
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        frame++;
        if (frame > 140) particles.forEach(p => p.opacity = Math.max(0, p.opacity - 0.02));
        particles.forEach(p => {
            p.y += p.speedY;
            p.x += p.speedX + Math.sin(frame * 0.02 + p.x) * 0.5;
            p.rotation += p.rotationSpeed;
            ctx.save();
            ctx.globalAlpha = p.opacity;
            ctx.translate(p.x, p.y);
            ctx.rotate(p.rotation * Math.PI / 180);
            ctx.fillStyle = p.color;
            if (p.shape === 'rect') {
                ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size * 0.6);
            } else {
                ctx.beginPath();
                ctx.arc(0, 0, p.size / 2, 0, Math.PI * 2);
                ctx.fill();
            }
            ctx.restore();
        });
        if (frame < 200) requestAnimationFrame(animate); else canvas.remove();
    }
    animate();
    window.addEventListener('resize', () => { canvas.width = innerWidth; canvas.height = innerHeight; });
})();
</script>

<div th:replace="~{fragments/layout :: shortcuts}"></div>
<script th:replace="~{fragments/layout :: themeScript}"></script>
</body>
</html>
